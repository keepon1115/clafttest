<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¸ãƒ–ãƒ³ã‚¯ãƒ©ãƒ•ãƒˆ - å†’é™ºè€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†</title>
    
    <!-- ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ¶å¾¡ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- PWAé–¢é€£ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="theme-color" content="#29B6F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CLAFT">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- ãƒ•ã‚©ãƒ³ãƒˆã¨ã‚¹ã‚¿ã‚¤ãƒ« -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;900&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/auth.css">
    
    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
</head>
<body>
    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="hamburger-menu" id="hamburgerMenu">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">ğŸ® CLAFT</div>
        </div>
        <div class="sidebar-nav">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i><span class="nav-label">ãƒ›ãƒ¼ãƒ </span></a></li>
                <li><a href="quest.html"><i class="fas fa-map"></i><span class="nav-label">ã‚¯ã‚¨ã‚¹ãƒˆãƒãƒƒãƒ—</span></a></li>
                <li><a href="yononaka.html"><i class="fas fa-globe"></i><span class="nav-label">Yononaka</span></a></li>
                <li><a href="mirai.html"><i class="fas fa-rocket"></i><span class="nav-label">ãƒŸãƒ©ã‚¤ã‚¯ãƒ©ãƒ•ãƒˆ</span></a></li>
            </ul>
        </div>
    </nav>

    <!-- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- èªè¨¼ãƒœã‚¿ãƒ³ç”¨ã‚¹ãƒšãƒ¼ã‚¹ -->
    <div class="nav-buttons"></div>

    <!-- èƒŒæ™¯ã®éƒ¨å±‹ -->
    <div class="room-background">
        <div class="window">
            <div class="sun"></div>
            <div class="cloud cloud1"></div>
        </div>
        <div class="floor"></div>
        <div class="bookshelf">
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
        </div>
        <div class="plant">
            <div class="pot"></div>
            <div class="leaf"></div>
            <div class="leaf"></div>
            <div class="leaf"></div>
        </div>
    </div>

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
            </a>
            <div class="header-title">
                <h1>ğŸ® ã‚¸ãƒ–ãƒ³ã‚¯ãƒ©ãƒ•ãƒˆ</h1>
                <p>å†’é™ºè€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚ˆã†ï¼</p>
            </div>
            <div class="save-indicator" id="saveIndicator">
                <i class="fas fa-check-circle"></i>
                <span>ä¿å­˜æ¸ˆã¿</span>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-container">
        <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
        <aside class="character-preview">
            <div class="preview-card">
                <div class="character-avatar">
                    <div class="avatar-circle" id="avatarCircle">
                        <input type="file" id="avatarInput" class="avatar-input" accept="image/*">
                        <img id="avatarImage" src="images/default-avatar.png" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ">
                        <div class="upload-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="upload-progress" id="uploadProgress"></div>
                    </div>
                    <div class="character-speech" id="characterSpeech">
                        <span id="speechText">ã‚ˆã‚ã—ãï¼</span>
                    </div>
                </div>
                <h2 class="character-name" id="displayName">ãŸã‚ã†</h2>
                
                <div class="character-stats">
                    <div class="stat-item">
                        <div class="stat-label">ã‚­ãƒ£ãƒ©ç‰¹æ€§</div>
                        <div class="stat-value" id="displayCharacter">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ã¨ãã„ã‚¹ã‚­ãƒ«</div>
                        <div class="stat-value" id="displaySkill">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ã™ããªå ´æ‰€</div>
                        <div class="stat-value" id="displayPlace">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ä»²é–“ã‚¿ã‚¤ãƒ—</div>
                        <div class="stat-value" id="displayCompanion">-</div>
                    </div>
                </div>
                
                <div class="completion-bar">
                    <div class="completion-fill" id="completionFill" style="width: 20%">
                        <div class="completion-text" id="completionText">20% å®Œæˆ</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ  -->
        <section class="edit-form">
            <div class="form-tabs">
                <button class="tab-button active" data-tab="basic">
                    <i class="fas fa-user"></i> åŸºæœ¬æƒ…å ±
                </button>
                <button class="tab-button" data-tab="ability">
                    <i class="fas fa-star"></i> èƒ½åŠ›è¨­å®š
                </button>
                <button class="tab-button" data-tab="preference">
                    <i class="fas fa-heart"></i> å¥½ã¿è¨­å®š
                </button>
                <button class="tab-button" data-tab="social">
                    <i class="fas fa-users"></i> ä»²é–“è¨­å®š
                </button>
                <button class="tab-button" data-tab="message">
                    <i class="fas fa-comment"></i> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                </button>
            </div>

            <!-- åŸºæœ¬æƒ…å ±ã‚¿ãƒ– -->
            <div class="tab-content active" id="basic-tab">
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ‘¤</span>
                        ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ 
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">å†’é™ºã§å‘¼ã°ã‚Œã‚‹åå‰ã ã‚ˆï¼</span>
                        </span>
                    </label>
                    <input type="text" class="form-input" id="nickname" placeholder="ä¾‹ï¼šãŸã‚ã†" maxlength="10">
                    <div class="character-limit">
                        <span id="nicknameCount">0</span> / 10æ–‡å­—
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">âœ¨</span>
                        ã‚­ãƒ£ãƒ©ï¼ˆç‰¹æ€§ï¼‰
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">ã©ã‚“ãªå†’é™ºè€…ã‚¿ã‚¤ãƒ—ï¼Ÿ</span>
                        </span>
                    </label>
                    <div class="choice-buttons">
                        <button class="choice-button" data-character="å‹‡è€…">âš”ï¸ å‹‡è€…</button>
                        <button class="choice-button" data-character="é­”æ³•ä½¿ã„">ğŸª„ é­”æ³•ä½¿ã„</button>
                        <button class="choice-button" data-character="æ¢æ¤œå®¶">ğŸ—ºï¸ æ¢æ¤œå®¶</button>
                        <button class="choice-button" data-character="ç™ºæ˜å®¶">ğŸ”§ ç™ºæ˜å®¶</button>
                        <button class="choice-button" data-character="èŠ¸è¡“å®¶">ğŸ¨ èŠ¸è¡“å®¶</button>
                        <button class="choice-button" data-character="å­¦è€…">ğŸ“š å­¦è€…</button>
                    </div>
                    <input type="text" class="form-input" id="character" placeholder="ãã®ä»–ã®ç‰¹æ€§ã‚’å…¥åŠ›" style="margin-top: 10px;">
                </div>
            </div>

            <!-- èƒ½åŠ›è¨­å®šã‚¿ãƒ– -->
            <div class="tab-content" id="ability-tab">
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ’ª</span>
                        ã¨ãã„ï¼ˆã‚¹ã‚­ãƒ«ï¼‰
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">å¾—æ„ãªã“ã¨ã‚’3ã¤ã¾ã§ï¼</span>
                        </span>
                    </label>
                    <div class="choice-buttons">
                        <button class="choice-button skill-button" data-skill="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°">ğŸ’» ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</button>
                        <button class="choice-button skill-button" data-skill="ãƒ‡ã‚¶ã‚¤ãƒ³">ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³</button>
                        <button class="choice-button skill-button" data-skill="ã‚¹ãƒãƒ¼ãƒ„">âš½ ã‚¹ãƒãƒ¼ãƒ„</button>
                        <button class="choice-button skill-button" data-skill="éŸ³æ¥½">ğŸµ éŸ³æ¥½</button>
                        <button class="choice-button skill-button" data-skill="æ–™ç†">ğŸ³ æ–™ç†</button>
                        <button class="choice-button skill-button" data-skill="ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³">ğŸ’¬ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³</button>
                    </div>
                    <input type="text" class="form-input" id="skills" placeholder="ãã®ä»–ã®ã‚¹ã‚­ãƒ«ã‚’å…¥åŠ›ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰" style="margin-top: 10px;">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ˜…</span>
                        ã‚ˆã‚ã¿ï¼ˆè‹¦æ‰‹ï¼‰
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">è‹¦æ‰‹ãªã“ã¨ã‚‚å€‹æ€§ã ã‚ˆï¼</span>
                        </span>
                    </label>
                    <textarea class="form-textarea" id="weakness" placeholder="ä¾‹ï¼šæœèµ·ãã‚‹ã®ãŒè‹¦æ‰‹ã€ç‰‡ä»˜ã‘ãŒç¶šã‹ãªã„" maxlength="50"></textarea>
                    <div class="character-limit">
                        <span id="weaknessCount">0</span> / 50æ–‡å­—
                    </div>
                </div>
            </div>

            <!-- å¥½ã¿è¨­å®šã‚¿ãƒ– -->
            <div class="tab-content" id="preference-tab">
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ–ï¸</span>
                        ã™ããªæ™‚é–“ãƒ»å ´æ‰€
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">è½ã¡ç€ãå ´æ‰€ã‚„æ™‚é–“å¸¯ï¼</span>
                        </span>
                    </label>
                    <div class="choice-buttons">
                        <button class="choice-button place-button" data-place="ã‚«ãƒ•ã‚§">â˜• ã‚«ãƒ•ã‚§</button>
                        <button class="choice-button place-button" data-place="å›³æ›¸é¤¨">ğŸ“š å›³æ›¸é¤¨</button>
                        <button class="choice-button place-button" data-place="å…¬åœ’">ğŸŒ³ å…¬åœ’</button>
                        <button class="choice-button place-button" data-place="å®¶">ğŸ  å®¶</button>
                        <button class="choice-button place-button" data-place="å¤œã®æ™‚é–“">ğŸŒ™ å¤œã®æ™‚é–“</button>
                        <button class="choice-button place-button" data-place="æœã®æ™‚é–“">ğŸŒ… æœã®æ™‚é–“</button>
                    </div>
                    <input type="text" class="form-input" id="favoritePlace" placeholder="ãã®ä»–ã®å ´æ‰€ãƒ»æ™‚é–“ã‚’å…¥åŠ›" style="margin-top: 10px;">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">âš¡</span>
                        ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒãƒ£ãƒ¼ã‚¸æ–¹æ³•
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">å…ƒæ°—ã«ãªã‚‹æ–¹æ³•ï¼</span>
                        </span>
                    </label>
                    <textarea class="form-textarea" id="energyCharge" placeholder="ä¾‹ï¼šå¥½ããªéŸ³æ¥½ã‚’è´ãã€æ•£æ­©ã™ã‚‹ã€å‹é”ã¨è©±ã™" maxlength="100"></textarea>
                    <div class="character-limit">
                        <span id="energyChargeCount">0</span> / 100æ–‡å­—
                    </div>
                </div>
            </div>

            <!-- ä»²é–“è¨­å®šã‚¿ãƒ– -->
            <div class="tab-content" id="social-tab">
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ¤</span>
                        ä¸€ç·’ã«å†’é™ºã—ãŸã„äºº
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">ã©ã‚“ãªä»²é–“ã¨å†’é™ºã—ãŸã„ï¼Ÿ</span>
                        </span>
                    </label>
                    <div class="choice-buttons">
                        <button class="choice-button companion-button" data-companion="ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—">ğŸ‘‘ ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—</button>
                        <button class="choice-button companion-button" data-companion="ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—">ğŸ›¡ï¸ ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ—</button>
                        <button class="choice-button companion-button" data-companion="ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼">ğŸ­ ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼</button>
                        <button class="choice-button companion-button" data-companion="ã‚¢ã‚¤ãƒ‡ã‚¢ãƒãƒ³">ğŸ’¡ ã‚¢ã‚¤ãƒ‡ã‚¢ãƒãƒ³</button>
                        <button class="choice-button companion-button" data-companion="å†·é™ãªåˆ†æå®¶">ğŸ§ å†·é™ãªåˆ†æå®¶</button>
                        <button class="choice-button companion-button" data-companion="è¡Œå‹•æ´¾">ğŸƒ è¡Œå‹•æ´¾</button>
                    </div>
                    <input type="text" class="form-input" id="companion" placeholder="ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã‚’å…¥åŠ›" style="margin-top: 10px;">
                </div>
            </div>

            <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ãƒ– -->
            <div class="tab-content" id="message-tab">
                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ’­</span>
                        ã‚»ãƒªãƒ•
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å£ãã›ï¼</span>
                        </span>
                    </label>
                    <input type="text" class="form-input" id="catchphrase" placeholder="ä¾‹ï¼šã‚ˆã‚ã—ãï¼ä¸€ç·’ã«é ‘å¼µã‚ã†ï¼" maxlength="30">
                    <div class="character-limit">
                        <span id="catchphraseCount">0</span> / 30æ–‡å­—
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <span class="label-icon">ğŸ“</span>
                        ã²ã¨ã“ã¨
                        <span class="help-tooltip">
                            <i class="fas fa-question"></i>
                            <span class="tooltip-content">è‡ªå·±ç´¹ä»‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼</span>
                        </span>
                    </label>
                    <textarea class="form-textarea" id="message" placeholder="ä¾‹ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå¤§å¥½ããªå†’é™ºè€…ã§ã™ï¼ã¿ã‚“ãªã§æ¥½ã—ãå­¦ã³ãªãŒã‚‰æˆé•·ã—ãŸã„ã§ã™ã€‚" maxlength="200"></textarea>
                    <div class="character-limit">
                        <span id="messageCount">0</span> / 200æ–‡å­—
                    </div>
                </div>
            </div>

            <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="cancelEdit()">
                    <i class="fas fa-times"></i> ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
                <button class="btn btn-primary" onclick="saveProfile()">
                    <i class="fas fa-save"></i> ä¿å­˜ã™ã‚‹
                </button>
            </div>
        </section>
    </main>

    <!-- å®Ÿç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="achievement-modal" id="achievementModal">
        <div class="achievement-icon">ğŸ†</div>
        <h3 class="achievement-title">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å®Œæˆï¼</h3>
        <p class="achievement-description">ç´ æ™´ã‚‰ã—ã„å†’é™ºè€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒã§ãã¾ã—ãŸï¼</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/auth.js"></script>
    <script>
        // çŠ¶æ…‹ç®¡ç†
        let profileData = {
            nickname: 'ãŸã‚ã†',
            character: '',
            skills: [],
            weakness: '',
            favoritePlace: '',
            energyCharge: '',
            companion: '',
            catchphrase: '',
            message: ''
        };

        let currentUser = null;
        let isLoading = false;

        // èªè¨¼çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®å‡¦ç†
        window.onAuthStateChanged = async function(user) {
            currentUser = user;
            if (user) {
                // ãƒ­ã‚°ã‚¤ãƒ³æ™‚ï¼šãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
                await loadProfileFromSupabase();
            } else {
                // æœªãƒ­ã‚°ã‚¤ãƒ³æ™‚ï¼šèªè¨¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                authManager.showAuthModal();
            }
        };

        // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–æ™‚ã®å‡¦ç†ã‚’æ›´æ–°
        document.addEventListener('DOMContentLoaded', function() {
            // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    switchTab(targetTab);
                });
            });

            // å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            setupInputListeners();
            
            // é¸æŠãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            setupChoiceButtons();
            
            // è‡ªå‹•ä¿å­˜ï¼ˆSupabaseã«ï¼‰
            setInterval(autoSave, 30000); // 30ç§’ã”ã¨ã«è‡ªå‹•ä¿å­˜
            
            // èªè¨¼ãƒã‚§ãƒƒã‚¯
            const user = authManager.getCurrentUser();
            if (!user) {
                // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯èªè¨¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                setTimeout(() => {
                    authManager.showAuthModal();
                }, 500);
            }
        });

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        function setupInputListeners() {
            // ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ 
            const nicknameInput = document.getElementById('nickname');
            nicknameInput.addEventListener('input', function() {
                profileData.nickname = this.value || 'ãŸã‚ã†';
                updateCharacterDisplay();
                updateCharacterLimit('nickname', this.value.length, 10);
            });

            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç‰¹æ€§
            const characterInput = document.getElementById('character');
            characterInput.addEventListener('input', function() {
                updateCharacterDisplay();
            });

            // ãã®ä»–ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
            const fields = ['skills', 'weakness', 'favoritePlace', 'energyCharge', 'companion', 'catchphrase', 'message'];
            fields.forEach(field => {
                const element = document.getElementById(field);
                if (element) {
                    element.addEventListener('input', function() {
                        profileData[field] = this.value;
                        updateCharacterDisplay();
                        
                        // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
                        if (element.maxLength) {
                            updateCharacterLimit(field, this.value.length, element.maxLength);
                        }
                    });
                }
            });
        }

        // é¸æŠãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupChoiceButtons() {
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ
            document.querySelectorAll('[data-character]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-character]').forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    profileData.character = this.getAttribute('data-character');
                    document.getElementById('character').value = profileData.character;
                    updateCharacterDisplay();
                });
            });

            // ã‚¹ã‚­ãƒ«é¸æŠï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰
            document.querySelectorAll('.skill-button').forEach(button => {
                button.addEventListener('click', function() {
                    const skill = this.getAttribute('data-skill');
                    if (this.classList.contains('selected')) {
                        this.classList.remove('selected');
                        profileData.skills = profileData.skills.filter(s => s !== skill);
                    } else if (profileData.skills.length < 3) {
                        this.classList.add('selected');
                        profileData.skills.push(skill);
                    } else {
                        showNotification('ã‚¹ã‚­ãƒ«ã¯3ã¤ã¾ã§é¸æŠã§ãã¾ã™ï¼');
                    }
                    updateSkillsInput();
                    updateCharacterDisplay();
                });
            });

            // å ´æ‰€é¸æŠ
            document.querySelectorAll('.place-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.place-button').forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    profileData.favoritePlace = this.getAttribute('data-place');
                    document.getElementById('favoritePlace').value = profileData.favoritePlace;
                    updateCharacterDisplay();
                });
            });

            // ä»²é–“é¸æŠ
            document.querySelectorAll('.companion-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.companion-button').forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    profileData.companion = this.getAttribute('data-companion');
                    document.getElementById('companion').value = profileData.companion;
                    updateCharacterDisplay();
                });
            });
        }

        // ã‚¹ã‚­ãƒ«å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ›´æ–°
        function updateSkillsInput() {
            document.getElementById('skills').value = profileData.skills.join(', ');
        }

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤ºã®æ›´æ–°
        function updateCharacterDisplay() {
            // åå‰
            document.getElementById('displayName').textContent = profileData.nickname || 'ãŸã‚ã†';
            
            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
            document.getElementById('displayCharacter').textContent = profileData.character || '-';
            document.getElementById('displaySkill').textContent = profileData.skills.length > 0 ? profileData.skills[0] : '-';
            document.getElementById('displayPlace').textContent = profileData.favoritePlace || '-';
            document.getElementById('displayCompanion').textContent = profileData.companion || '-';
            
            // ã‚»ãƒªãƒ•
            if (profileData.catchphrase) {
                document.getElementById('speechText').textContent = profileData.catchphrase;
                document.getElementById('characterSpeech').classList.add('active');
            } else {
                document.getElementById('characterSpeech').classList.remove('active');
            }
            
            // ã‚¢ãƒã‚¿ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®æ›´æ–°
            updateAvatarIcon();
            
            // å®Œæˆåº¦ã®æ›´æ–°
            updateCompletion();
        }

        // ã‚¢ãƒã‚¿ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®æ›´æ–°
        function updateAvatarIcon() {
            const avatarCircle = document.getElementById('avatarCircle');
            const iconMap = {
                'å‹‡è€…': 'fa-shield-alt',
                'é­”æ³•ä½¿ã„': 'fa-hat-wizard',
                'æ¢æ¤œå®¶': 'fa-compass',
                'ç™ºæ˜å®¶': 'fa-cog',
                'èŠ¸è¡“å®¶': 'fa-palette',
                'å­¦è€…': 'fa-book'
            };
            
            const iconClass = iconMap[profileData.character] || 'fa-user';
            avatarCircle.innerHTML = `<i class="fas ${iconClass}"></i>`;
        }

        // å®Œæˆåº¦ã®è¨ˆç®—ã¨æ›´æ–°
        function updateCompletion() {
            const fields = ['nickname', 'character', 'skills', 'weakness', 'favoritePlace', 'energyCharge', 'companion', 'catchphrase', 'message'];
            let filledCount = 0;
            
            fields.forEach(field => {
                if (field === 'skills') {
                    if (profileData[field].length > 0) filledCount++;
                } else if (profileData[field] && profileData[field].trim() !== '') {
                    filledCount++;
                }
            });
            
            const percentage = Math.round((filledCount / fields.length) * 100);
            document.getElementById('completionFill').style.width = percentage + '%';
            document.getElementById('completionText').textContent = percentage + '% å®Œæˆ';
            
            // 100%é”æˆæ™‚ã®æ¼”å‡º
            if (percentage === 100 && !sessionStorage.getItem('achievementShown')) {
                setTimeout(() => showAchievement(), 500);
                sessionStorage.setItem('achievementShown', 'true');
            }
        }

        // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆã®æ›´æ–°
        function updateCharacterLimit(fieldId, current, max) {
            const countElement = document.getElementById(fieldId + 'Count');
            if (countElement) {
                countElement.textContent = current;
                const limitElement = countElement.parentElement;
                
                if (current >= max) {
                    limitElement.classList.add('error');
                } else if (current >= max * 0.8) {
                    limitElement.classList.add('warning');
                } else {
                    limitElement.classList.remove('warning', 'error');
                }
            }
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--yellow);
                color: var(--text-dark);
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: var(--shadow-soft);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // å®Ÿç¸¾è¡¨ç¤º
        function showAchievement() {
            document.getElementById('modalOverlay').classList.add('show');
            document.getElementById('achievementModal').classList.add('show');
            
            setTimeout(() => {
                document.getElementById('modalOverlay').classList.remove('show');
                document.getElementById('achievementModal').classList.remove('show');
            }, 3000);
        }

        // Supabaseã‹ã‚‰ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚€
        async function loadProfileFromSupabase() {
            const user = authManager.getCurrentUser();
            if (!user) return;

            showLoading(true);

            try {
                const { data: profile, error } = await supabase
                    .from('users_profile')
                    .select('*')
                    .eq('id', user.id)
                    .single();

                if (error && error.code !== 'PGRST116') throw error;

                if (profile) {
                    // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’profileDataã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®š
                    profileData = {
                        nickname: profile.nickname || '',
                        character: profile.character_type || '',
                        skills: profile.strengths || [],
                        weakness: profile.weaknesses ? profile.weaknesses.join('ã€') : '',
                        favoritePlace: profile.favorite_time_place || '',
                        energyCharge: profile.energy_charge_method || '',
                        companion: profile.adventure_partner || '',
                        catchphrase: profile.catchphrase || '',
                        message: profile.comment || ''
                    };

                    // ãƒ•ã‚©ãƒ¼ãƒ ã«å€¤ã‚’è¨­å®š
                    document.getElementById('nickname').value = profileData.nickname;
                    document.getElementById('character').value = profileData.character;
                    document.getElementById('skills').value = profileData.skills.join(', ');
                    document.getElementById('weakness').value = profileData.weakness;
                    document.getElementById('favoritePlace').value = profileData.favoritePlace;
                    document.getElementById('energyCharge').value = profileData.energyCharge;
                    document.getElementById('companion').value = profileData.companion;
                    document.getElementById('catchphrase').value = profileData.catchphrase;
                    document.getElementById('message').value = profileData.message;

                    // é¸æŠãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’å¾©å…ƒ
                    restoreSelectedButtons();

                    // è¡¨ç¤ºã‚’æ›´æ–°
                    updateCharacterDisplay();
                }
            } catch (error) {
                console.error('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                showNotification('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
            } finally {
                showLoading(false);
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
        function populateForm() {
            document.getElementById('nickname').value = profileData.nickname || '';
            document.getElementById('character').value = profileData.character || '';
            document.getElementById('skills').value = Array.isArray(profileData.skills) ? profileData.skills.join(', ') : profileData.skills || '';
            document.getElementById('weakness').value = profileData.weakness || '';
            document.getElementById('favoritePlace').value = profileData.favoritePlace || '';
            document.getElementById('energyCharge').value = profileData.energyCharge || '';
            document.getElementById('companion').value = profileData.companion || '';
            document.getElementById('catchphrase').value = profileData.catchphrase || '';
            document.getElementById('message').value = profileData.message || '';
        }

        // è‡ªå‹•ä¿å­˜
        async function autoSave() {
            if (!currentUser || isLoading) return;
            
            const indicator = document.getElementById('saveIndicator');
            if (indicator) {
                indicator.classList.add('saving');
                indicator.querySelector('span').textContent = 'è‡ªå‹•ä¿å­˜ä¸­...';
            }
            
            try {
                await saveToSupabase(false); // ã‚µã‚¤ãƒ¬ãƒ³ãƒˆä¿å­˜
                if (indicator) {
                    indicator.classList.remove('saving');
                    indicator.querySelector('span').textContent = 'è‡ªå‹•ä¿å­˜æ¸ˆã¿';
                }
            } catch (error) {
                console.error('è‡ªå‹•ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                if (indicator) {
                    indicator.classList.remove('saving');
                    indicator.querySelector('span').textContent = 'ä¿å­˜ã‚¨ãƒ©ãƒ¼';
                }
            }
        }

        // Supabaseã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä¿å­˜
        async function saveToSupabase(showNotifications = true) {
            if (!currentUser) {
                if (showNotifications) showNotification('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
                return false;
            }

            try {
                // ã‚¹ã‚­ãƒ«ã¨å¼±ã¿ã‚’é…åˆ—ã«å¤‰æ›
                const strengthsArray = typeof profileData.skills === 'string' 
                    ? profileData.skills.split(',').map(s => s.trim()).filter(s => s)
                    : profileData.skills || [];
                
                const weaknessesArray = profileData.weakness 
                    ? profileData.weakness.split(',').map(s => s.trim()).filter(s => s)
                    : [];

                const profileUpdate = {
                    id: currentUser.id,
                    email: currentUser.email,
                    nickname: profileData.nickname || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
                    character_type: profileData.character || null,
                    catchphrase: profileData.catchphrase || null,
                    strengths: strengthsArray,
                    weaknesses: weaknessesArray,
                    favorite_time_place: profileData.favoritePlace || null,
                    energy_charge_method: profileData.energyCharge || null,
                    adventure_partner: profileData.companion || null,
                    comment: profileData.message || null,
                    updated_at: new Date().toISOString()
                };

                const { data, error } = await supabase
                    .from('users_profile')
                    .upsert(profileUpdate, { 
                        onConflict: 'id',
                        ignoreDuplicates: false 
                    });

                if (error) throw error;

                if (showNotifications) {
                    showNotification('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
                }
                
                return true;
            } catch (error) {
                console.error('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                if (showNotifications) {
                    showNotification('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                }
                return false;
            }
        }

        // é¸æŠãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’å¾©å…ƒ
        function restoreSelectedButtons() {
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
            if (profileData.character) {
                const charButton = document.querySelector(`[data-character="${profileData.character}"]`);
                if (charButton) charButton.classList.add('selected');
            }
            
            // ã‚¹ã‚­ãƒ«
            profileData.skills.forEach(skill => {
                const skillButton = document.querySelector(`[data-skill="${skill}"]`);
                if (skillButton) skillButton.classList.add('selected');
            });
            
            // å ´æ‰€
            if (profileData.favoritePlace) {
                const placeButton = document.querySelector(`[data-place="${profileData.favoritePlace}"]`);
                if (placeButton) placeButton.classList.add('selected');
            }
            
            // ä»²é–“
            if (profileData.companion) {
                const companionButton = document.querySelector(`[data-companion="${profileData.companion}"]`);
                if (companionButton) companionButton.classList.add('selected');
            }
        }

        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’Supabaseã«ä¿å­˜
        async function saveProfile() {
            const user = authManager.getCurrentUser();
            if (!user) {
                showNotification('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
                authManager.showAuthModal();
                return;
            }

            showLoading(true);
            
            try {
                // ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                profileData.nickname = document.getElementById('nickname').value || 'ãŸã‚ã†';
                profileData.character = document.getElementById('character').value;
                profileData.weakness = document.getElementById('weakness').value;
                profileData.favoritePlace = document.getElementById('favoritePlace').value;
                profileData.energyCharge = document.getElementById('energyCharge').value;
                profileData.companion = document.getElementById('companion').value;
                profileData.catchphrase = document.getElementById('catchphrase').value;
                profileData.message = document.getElementById('message').value;
                
                // ã‚¹ã‚­ãƒ«ã®å‡¦ç†
                const skillsInput = document.getElementById('skills').value;
                if (skillsInput) {
                    profileData.skills = skillsInput.split(/[,ã€]/).map(s => s.trim()).filter(s => s);
                }

                // Supabaseã«ä¿å­˜ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«å¤‰æ›
                const saveData = {
                    id: user.id,
                    email: user.email,
                    nickname: profileData.nickname,
                    character_type: profileData.character,
                    catchphrase: profileData.catchphrase,
                    strengths: profileData.skills,
                    weaknesses: profileData.weakness ? profileData.weakness.split(/[,ã€]/).map(s => s.trim()).filter(s => s) : [],
                    favorite_time_place: profileData.favoritePlace,
                    energy_charge_method: profileData.energyCharge,
                    adventure_partner: profileData.companion,
                    comment: profileData.message,
                    updated_at: new Date().toISOString()
                };

                // upsertï¼ˆå­˜åœ¨ã—ãªã‘ã‚Œã°ä½œæˆã€å­˜åœ¨ã™ã‚Œã°æ›´æ–°ï¼‰
                const { data, error } = await supabase
                    .from('users_profile')
                    .upsert(saveData)
                    .select()
                    .single();

                if (error) throw error;

                showNotification('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
                
                // ä¿å­˜ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                const saveButton = document.querySelector('.btn-primary');
                saveButton.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    saveButton.style.transform = 'scale(1)';
                }, 200);

                // å®Œæˆåº¦ãŒ100%ã®å ´åˆã¯å®Ÿç¸¾ã‚’è¡¨ç¤º
                const percentage = parseInt(document.getElementById('completionText').textContent);
                if (percentage === 100) {
                    setTimeout(() => showAchievement(), 500);
                }

                // è‡ªå‹•ä¿å­˜ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ›´æ–°
                updateSaveIndicator('saved');

            } catch (error) {
                console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                showNotification('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                updateSaveIndicator('error');
            } finally {
                showLoading(false);
            }
        }

        // ç·¨é›†ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        function cancelEdit() {
            if (confirm('ç·¨é›†å†…å®¹ã‚’ç ´æ£„ã—ã¦ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ')) {
                window.location.href = 'index.html';
            }
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        function showLoading(show) {
            let loadingEl = document.getElementById('loadingOverlay');
            
            if (!loadingEl) {
                loadingEl = document.createElement('div');
                loadingEl.id = 'loadingOverlay';
                loadingEl.className = 'loading-overlay';
                loadingEl.innerHTML = `
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <p>å‡¦ç†ä¸­...</p>
                    </div>
                `;
                loadingEl.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                `;
                document.body.appendChild(loadingEl);
            }
            
            loadingEl.style.display = show ? 'flex' : 'none';
        }

        // ä¿å­˜ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®æ›´æ–°
        function updateSaveIndicator(status) {
            const indicator = document.getElementById('saveIndicator');
            if (!indicator) return;
            
            switch(status) {
                case 'saving':
                    indicator.classList.add('saving');
                    indicator.querySelector('span').textContent = 'ä¿å­˜ä¸­...';
                    indicator.querySelector('i').className = 'fas fa-spinner fa-spin';
                    break;
                case 'saved':
                    indicator.classList.remove('saving');
                    indicator.querySelector('span').textContent = 'ä¿å­˜æ¸ˆã¿';
                    indicator.querySelector('i').className = 'fas fa-check-circle';
                    break;
                case 'error':
                    indicator.classList.remove('saving');
                    indicator.querySelector('span').textContent = 'ä¿å­˜ã‚¨ãƒ©ãƒ¼';
                    indicator.querySelector('i').className = 'fas fa-exclamation-circle';
                    break;
            }
        }

        // æ—¢å­˜ã®é–¢æ•°ã‚’ä¸Šæ›¸ã
        window.saveToLocalStorage = function() {
            // è‡ªå‹•ä¿å­˜æ™‚ã‚‚Supabaseã«ä¿å­˜
            saveProfile();
        };

        window.loadFromLocalStorage = function() {
            // Supabaseã‹ã‚‰èª­ã¿è¾¼ã¿
            loadProfileFromSupabase();
        };

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®CSSè¿½åŠ 
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            .loading-spinner {
                width: 40px;
                height: 40px;
                border: 4px solid #f3f3f3;
                border-top: 4px solid var(--blue);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-bottom: 20px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .loading-content {
                text-align: center;
                color: white;
                font-size: 18px;
                font-weight: 500;
            }
        `;
        document.head.appendChild(style);
    </script>
    <script src="js/include.js"></script>
</body>
</html>