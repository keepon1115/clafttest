<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- „Ç≠„É£„ÉÉ„Ç∑„É•Âà∂Âæ° -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- PWAÈñ¢ÈÄ£„É°„Çø„Çø„Ç∞ -->
    <meta name="theme-color" content="#29B6F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CLAFT">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="manifest" href="manifest.json">
    <title>CLAFT „ÇØ„Ç®„Çπ„Éà„Éû„ÉÉ„Éó - ÂÜíÈô∫„ÅÆÊõ∏</title>
    
    <!-- „Éï„Ç©„É≥„Éà„Å®„Çπ„Çø„Ç§„É´ -->
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/auth.css">
    
    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
    
    <style>
        /* CSS„ÅØÂâçÂõû„Å®Â§âÊõ¥„Å™„Åó„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Åì„Åß„ÅØÁúÅÁï•„Åó„Åæ„Åô */
        /* (ÂÆüÈöõ„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØ„ÄÅÂâçÂõû„ÅÆCSS„Åå„Åì„Åì„Å´„Åù„ÅÆ„Åæ„ÅæÂÖ•„Çä„Åæ„Åô) */
        * { margin: 0; padding: 0; box-sizing: border-box; image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges; }
        body { font-family: 'DotGothic16', 'M PLUS Rounded 1c', sans-serif; line-height: 1.6; color: #2c2c2c; overflow-x: hidden; background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 50%, #B0E0E6 100%); min-height: 100vh; position: relative; padding-bottom: 100px; }
        .sky-object { position: fixed; opacity: 0.8; animation-timing-function: linear; animation-iteration-count: infinite; z-index: 1; pointer-events: none; }
        .cloud { width: 100px; height: 40px; background: white; border-radius: 100px; box-shadow: 20px 10px 0 10px white, -20px 10px 0 5px white; }
        .ufo { font-size: 40px; text-align: center; animation: ufo-wobble 3s ease-in-out infinite alternate; }
        .ufo::before { content: 'üõ∏'; }
        @keyframes ufo-wobble { from { transform: translateY(-3px) rotate(-2deg); } to { transform: translateY(3px) rotate(2deg); } }
        @keyframes float-sky-ltr { from { transform: translateX(0) translateY(var(--sy, 0)); } to { transform: translateX(calc(100vw + 200px)) translateY(var(--ey, 0)); } }
        @keyframes float-sky-rtl { from { transform: translateX(0) translateY(var(--sy, 0)); } to { transform: translateX(calc(-100vw - 200px)) translateY(var(--ey, 0)); } }

        .container { max-width: 1200px; margin: 0 auto; padding: 80px 16px 40px; position: relative; z-index: 10; }
        .map-header { text-align: center; margin-bottom: 30px; position: relative; }
        .map-header h1 { font-size: 2.5rem; color: #FFF; margin-bottom: 16px; text-shadow: 2px 2px 0 #4DB6F7, 4px 4px 0 #3A8BC4, 6px 6px 8px rgba(0,0,0,0.3); letter-spacing: 2px; animation: float_title 3s ease-in-out infinite; }
        @keyframes float_title { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .map-header p { font-size: 1.1rem; color: #FFF; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); background: rgba(0,0,0,0.2); display: inline-block; padding: 4px 16px; border-radius: 0; border: 2px solid rgba(255,255,255,0.3); }
        .adventure-log-button { display: inline-block; margin: 20px auto 0; padding: 12px 32px; background: #FFD700; border: 3px solid #B8860B; color: #654321; font-weight: bold; font-size: 1rem; cursor: pointer; position: relative; box-shadow: 0 0 0 1px #DAA520, 4px 4px 0 0 rgba(0,0,0,0.3); transition: all 0.1s ease; }
        .adventure-log-button::before { content: 'üìñ'; margin-right: 8px; }
        .adventure-log-button:hover { transform: translate(-2px, -2px); box-shadow: 0 0 0 1px #DAA520, 6px 6px 0 0 rgba(0,0,0,0.3); }
        .adventure-log-button:active { transform: translate(1px, 1px); box-shadow: 0 0 0 1px #DAA520, 2px 2px 0 0 rgba(0,0,0,0.3); }
        .stage-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; margin-bottom: 40px; padding: 0 20px; }
        @media (max-width: 767px) { .stage-grid { grid-template-columns: repeat(2, 1fr); gap: 24px; padding: 0; } }
        .stage-node { position: relative; text-align: center; cursor: pointer; transition: transform 0.2s ease; }
        .stage-node:nth-child(2), .stage-node:nth-child(5) { transform: translateY(40px); }
        @media (max-width: 767px) { .stage-node:nth-child(even) { transform: translateY(40px); } .stage-node:nth-child(5) { transform: translateY(0); } }
        .stage-node:hover { transform: translateY(-5px) scale(1.05); }
        .stage-node:nth-child(2):hover, .stage-node:nth-child(5):hover { transform: translateY(35px) scale(1.05); }
        @media (max-width: 767px) { .stage-node:nth-child(even):hover { transform: translateY(35px) scale(1.05); } .stage-node:nth-child(5):hover { transform: translateY(-5px) scale(1.05); } }
        .stage-icon { width: 120px; height: 120px; margin: 0 auto 16px; position: relative; background: #E8F5E9; border: 4px solid #333; box-shadow: 0 0 0 2px #666, 6px 6px 0 0 rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 64px; transition: all 0.3s ease; overflow: hidden; }
        .stage-node.locked .stage-icon, .stage-node.current .stage-icon { background: #9E9E9E; }
        .stage-node.completed .stage-icon { background: #FFF9C4; box-shadow: 0 0 0 2px #FFD700, 6px 6px 0 0 rgba(0,0,0,0.3), 0 0 20px rgba(255,215,0,0.5); }
        .stage-icon img.icon-image { width: 64px; height: 64px; object-fit: contain; image-rendering: pixelated; display: block; transition: filter 0.3s ease; filter: grayscale(1); }
        .stage-node.completed .stage-icon img.icon-image { filter: grayscale(0); }
        .stage-node.locked .stage-icon img.icon-image { filter: grayscale(1); opacity: 0.7; }
        .stage-icon .icon-fallback { font-size: 64px; display: none; filter: grayscale(1); }
        .stage-node.completed .stage-icon .icon-fallback { filter: grayscale(0); }
        .stage-node.locked .stage-icon .icon-fallback { filter: grayscale(1); opacity: 0.7; }
        .clear-effect { position: absolute; top: 10px; right: 10px; width: 32px; height: 32px; object-fit: contain; display: none; z-index: 2; animation: effect-animation 2s ease-in-out infinite; }
        .stage-node.completed .clear-effect { display: block; }
        @keyframes effect-animation { 0%, 100% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0.9; } 25% { transform: translateY(-5px) scale(1.1) rotate(5deg); opacity: 1; } 50% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0.9; } 75% { transform: translateY(-3px) scale(1.05) rotate(-5deg); opacity: 1; } }
        .clear-badge { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); background: #FFD700; border: 3px solid #B8860B; padding: 4px 12px; font-weight: bold; font-size: 14px; color: #654321; letter-spacing: 1px; box-shadow: 0 0 0 1px #DAA520, 3px 3px 0 0 rgba(0,0,0,0.5); z-index: 10; animation: bounce-in 0.5s ease; display: none; }
        .stage-node.completed .clear-badge { display: block; }
        @keyframes bounce-in { 0% { transform: translateX(-50%) translateY(-20px) scale(0); } 50% { transform: translateX(-50%) translateY(0) scale(1.2); } 100% { transform: translateX(-50%) translateY(0) scale(1); } }
        .stage-number-badge { position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); width: 44px; height: 44px; background: #4DB6F7; border: 3px solid #2C88C7; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: white; box-shadow: 0 0 0 1px #5AC8F7, 3px 3px 0 0 rgba(0,0,0,0.3); z-index: 5; padding: 2px; }
        .stage-number-badge::before { content: ''; width: 6px; height: 6px; background: white; border-radius: 50%; position: absolute; top: 8px; left: 10px; box-shadow: 0 0 0 1px #2C88C7; }
        .stage-number-badge::after { content: ''; width: 6px; height: 6px; background: white; border-radius: 50%; position: absolute; top: 8px; right: 10px; box-shadow: 0 0 0 1px #2C88C7; }
        .stage-number-text { margin-top: 14px; }
        .stage-node.locked .stage-number-badge { background: #757575; border-color: #616161; box-shadow: 0 0 0 1px #9E9E9E, 3px 3px 0 0 rgba(0,0,0,0.3); }
        .stage-node.locked .stage-number-badge::before, .stage-node.locked .stage-number-badge::after { background: #ccc; box-shadow: 0 0 0 1px #616161; }
        .stage-node.completed .stage-number-badge { background: #8EE38F; border-color: #6CBD6C; }
        .stage-node.completed .stage-number-badge::before, .stage-node.completed .stage-number-badge::after { box-shadow: 0 0 0 1px #6CBD6C; }
        .hero-face { position: absolute; top: -30px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; background-color: #FFEB3B; border: 3px solid #FBC02D; border-radius: 50%; z-index: 20; display: none; box-shadow: 2px 2px 0 rgba(0,0,0,0.2); animation: hero-face-bounce 1.5s ease-in-out infinite; }
        .hero-face::before, .hero-face::after { content: ''; position: absolute; width: 6px; height: 8px; background-color: #333; border-radius: 3px / 4px; top: 12px; }
        .hero-face::before { left: 9px; }
        .hero-face::after { right: 9px; }
        .hero-face .mouth { position: absolute; width: 16px; height: 2px; background-color: #333; bottom: 10px; left: 50%; transform: translateX(-50%); border-radius: 1px; }
        .stage-node.current .hero-face { display: block; }
        @keyframes hero-face-bounce { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-4px); } }
        .stage-info { background: white; border: 3px solid #333; padding: 12px 16px; margin-top: 16px; position: relative; box-shadow: 0 0 0 1px #666, 4px 4px 0 0 rgba(0,0,0,0.2); }
        .stage-title { font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 4px; }
        .stage-description { font-size: 0.9rem; color: #666; line-height: 1.4; }
        .path-line { position: absolute; width: 60px; height: 4px; background: repeating-linear-gradient( 90deg, #8B4513, #8B4513 10px, #D2691E 10px, #D2691E 20px ); top: 60px; right: -60px; transform: translateY(-50%); z-index: 1; }
        .stage-node:nth-child(3n) .path-line, .stage-node:last-child .path-line { display: none; }
        @media (max-width: 767px) { .stage-node:nth-child(3n) .path-line { display: block; } .stage-node:nth-child(2n) .path-line, .stage-node:last-child .path-line { display: none; } }
        .quest-button { position: fixed; bottom: 30px; right: 30px; width: auto; min-width: 200px; margin: 0; padding: 16px 32px; background: #FF6B6B; border: 4px solid #DC143C; color: white; font-size: 1.2rem; font-weight: bold; cursor: pointer; box-shadow: 0 0 0 2px #FF8787, 6px 6px 0 0 rgba(0,0,0,0.3); transition: all 0.1s ease; animation: pulse_button 2s ease-in-out infinite; z-index: 900; }
        @keyframes pulse_button { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        .quest-button:hover { transform: translate(-2px, -2px) scale(1.02); box-shadow: 0 0 0 2px #FF8787, 8px 8px 0 0 rgba(0,0,0,0.3); animation: none; }
        .quest-button:active { transform: translate(2px, 2px); box-shadow: 0 0 0 2px #FF8787, 2px 2px 0 0 rgba(0,0,0,0.3); }
        @media (max-width: 767px) { .quest-button { padding: 12px 24px; font-size: 1rem; bottom: 20px; right: 20px; min-width: 160px; } }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1001; align-items: center; justify-content: center; }
        .modal-content { background: #F5F5DC; border: 4px solid #8B4513; padding: 32px; max-width: 500px; width: 90%; box-shadow: 0 0 0 2px #A0522D, 8px 8px 0 0 rgba(0,0,0,0.5); position: relative; }
        .modal-close { position: absolute; top: 12px; right: 12px; width: 32px; height: 32px; background: #DC143C; border: 2px solid #8B0000; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; font-weight: bold; box-shadow: 2px 2px 0 0 rgba(0,0,0,0.5); }
        .modal-close:hover { transform: translate(-1px, -1px); box-shadow: 3px 3px 0 0 rgba(0,0,0,0.5); }
        .modal-close:active { transform: translate(1px, 1px); box-shadow: 1px 1px 0 0 rgba(0,0,0,0.5); }
        .modal-title { font-size: 1.6rem; color: #8B4513; margin-bottom: 16px; font-weight: bold; text-align: center; text-shadow: 1px 1px 0 rgba(0,0,0,0.1); }
        .modal-description { color: #654321; margin-bottom: 20px; line-height: 1.6; text-align: center; }
        .modal-message { background: #FFF9C4; border: 2px solid #F9A825; padding: 16px; margin-bottom: 24px; text-align: center; font-style: italic; color: #5D4037; box-shadow: inset 0 0 8px rgba(0,0,0,0.1); }
        .modal-buttons { display: flex; gap: 16px; justify-content: center; }
        @media (max-width: 767px) { .modal-buttons { flex-direction: column; } }
        .modal-button { flex: 1; padding: 12px 24px; border: 3px solid; font-size: 1rem; font-weight: bold; cursor: pointer; transition: all 0.1s ease; position: relative; }
        .modal-button.video { background: #4CAF50; border-color: #388E3C; color: white; box-shadow: 0 0 0 1px #66BB6A, 4px 4px 0 0 rgba(0,0,0,0.3); }
        .modal-button.video:hover { transform: translate(-2px, -2px); box-shadow: 0 0 0 1px #66BB6A, 6px 6px 0 0 rgba(0,0,0,0.3); }
        .modal-button.quest { background: #2196F3; border-color: #1976D2; color: white; box-shadow: 0 0 0 1px #42A5F5, 4px 4px 0 0 rgba(0,0,0,0.3); }
        .modal-button.quest:hover { transform: translate(-2px, -2px); box-shadow: 0 0 0 1px #42A5F5, 6px 6px 0 0 rgba(0,0,0,0.3); }
        .modal-button:active { transform: translate(1px, 1px); box-shadow: 0 0 0 1px currentColor, 2px 2px 0 0 rgba(0,0,0,0.3); }
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
        .loading-content { text-align: center; background: #F5F5DC; padding: 30px; border: 4px solid #8B4513; box-shadow: 0 0 0 2px #A0522D, 8px 8px 0 0 rgba(0,0,0,0.5); }
        .loading-spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #4DB6F7; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        .loading-content p { color: #654321; font-weight: bold; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* pending_approvalÁä∂ÊÖã„ÅÆ„Çπ„Çø„Ç§„É´ */
        .pending-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #FF9800;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            animation: pulse 2s ease-in-out infinite;
            z-index: 10;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº„ÅÆ„Çπ„Çø„Ç§„É´‰øÆÊ≠£ */
        .hamburger-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 45px;
            height: 45px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hamburger-menu .bar {
            width: 25px;
            height: 3px;
            background: #333;
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .hamburger-menu.active .bar:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger-menu.active .bar:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.active .bar:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

    </style>
</head>
<body>
    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº -->
    <div class="hamburger-menu" id="hamburgerMenu">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">üéÆ CLAFT</div>
        </div>
        <div class="sidebar-nav">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i><span class="nav-label">„Éõ„Éº„É†</span></a></li>
                <li><a href="quest.html" class="active"><i class="fas fa-map"></i><span class="nav-label">„ÇØ„Ç®„Çπ„Éà„Éû„ÉÉ„Éó</span></a></li>
                <li><a href="yononaka.html"><i class="fas fa-globe"></i><span class="nav-label">Yononaka</span></a></li>
                <li><a href="mirai.html"><i class="fas fa-rocket"></i><span class="nav-label">„Éü„É©„Ç§„ÇØ„É©„Éï„Éà</span></a></li>
            </ul>
        </div>
    </nav>

    <!-- „Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Ë™çË®º„Éú„Çø„É≥Áî®„Çπ„Éö„Éº„Çπ -->
    <div class="nav-buttons"></div>

    <div id="skyObjectsContainer"></div>
    <div class="loading-overlay" id="loadingOverlay"> <div class="loading-content"> <div class="loading-spinner"></div> <p>ÂÜíÈô∫„ÅÆÊ∫ñÂÇô‰∏≠...</p> </div> </div>
    
    <div class="container">
        <header class="map-header"> <h1>üó∫Ô∏è CLAFT „ÇØ„Ç®„Çπ„Éà„Éû„ÉÉ„Éó</h1> <p>„Åç„Åø„Å†„Åë„ÅÆÂÜíÈô∫Áâ©Ë™û„Çí„Å§„Åè„Çç„ÅÜÔºÅ</p> <button class="adventure-log-button" id="adventureLogBtn"> „Åì„Çå„Åæ„Åß„ÅÆÂÜíÈô∫„ÇíÊåØ„ÇäËøî„Çã </button> </header>
        <div class="stage-grid" id="stageGrid">
            <!-- „Çπ„ÉÜ„Éº„Ç∏1 -->
            <div class="stage-node" id="stage-1" data-stage-id="1">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div> 
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏1„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">üè†</span>
                    <img class="clear-effect" src="" alt="ÁÖô„Ç®„Éï„Çß„ÇØ„Éà" data-effect-type="smoke">
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">1</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
                <div class="path-line"></div>
            </div>
            <!-- „Çπ„ÉÜ„Éº„Ç∏2 -->
            <div class="stage-node" id="stage-2" data-stage-id="2">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div>
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏2„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">üå≤</span>
                    <img class="clear-effect" src="" alt="ÂãïÁâ©„Ç®„Éï„Çß„ÇØ„Éà" data-effect-type="animal">
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">2</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
                <div class="path-line"></div>
            </div>
            <!-- „Çπ„ÉÜ„Éº„Ç∏3 -->
            <div class="stage-node" id="stage-3" data-stage-id="3">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div>
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏3„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">‚öîÔ∏è</span>
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">3</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
                <div class="path-line"></div>
            </div>
            <!-- „Çπ„ÉÜ„Éº„Ç∏4 -->
            <div class="stage-node" id="stage-4" data-stage-id="4">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div>
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏4„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">üõ°Ô∏è</span>
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">4</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
                <div class="path-line"></div>
            </div>
            <!-- „Çπ„ÉÜ„Éº„Ç∏5 -->
            <div class="stage-node" id="stage-5" data-stage-id="5">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div>
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏5„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">üë•</span>
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">5</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
                <div class="path-line"></div>
            </div>
            <!-- „Çπ„ÉÜ„Éº„Ç∏6 -->
            <div class="stage-node" id="stage-6" data-stage-id="6">
                <div class="clear-badge">CLEAR!</div>
                <div class="hero-face"><div class="mouth"></div></div>
                <div class="stage-icon">
                    <img class="icon-image" src="" alt="„Çπ„ÉÜ„Éº„Ç∏6„Ç¢„Ç§„Ç≥„É≥" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <span class="icon-fallback">üè∞</span>
                </div>
                <div class="stage-number-badge"><span class="stage-number-text">6</span></div>
                <div class="stage-info"><h3 class="stage-title"></h3><p class="stage-description"></p></div>
            </div>
        </div>
    </div>
    <button class="quest-button" id="mainQuestButton">üî• Ê¨°„ÅÆÂÜíÈô∫„Å∏ÈÄ≤„ÇÄÔºÅ</button>
    <div class="modal" id="stageModal"> <div class="modal-content"> <button class="modal-close" id="modalCloseBtn">√ó</button> <h2 class="modal-title" id="modalStageTitle"></h2> <p class="modal-description" id="modalStageDescription"></p> <div class="modal-message" id="modalStageMessage"></div> <div class="modal-buttons"> <button class="modal-button video" id="modalVideoBtn">üé¨ ÂãïÁîª„ÇíË¶ã„Çã</button> <button class="modal-button quest" id="modalQuestBtn">‚öîÔ∏è „ÇØ„Ç®„Çπ„Éà„Å´Êåë„ÇÄ</button> </div> </div> </div>
    
    <!-- „Çπ„ÇØ„É™„Éó„Éà -->
    <script src="js/include.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/quest.js"></script>
</body>
</html>