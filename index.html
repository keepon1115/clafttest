<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂÜíÈô∫ËÄÖ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ - „Éõ„Éº„É†</title>
    
    <!-- „Ç≠„É£„ÉÉ„Ç∑„É•Âà∂Âæ° -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- PWAÈñ¢ÈÄ£„É°„Çø„Çø„Ç∞ -->
    <meta name="theme-color" content="#29B6F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CLAFT">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- „Éï„Ç©„É≥„Éà„Å®„Çπ„Çø„Ç§„É´ -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;900&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/auth.css">
    
    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
</head>
<body>
    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº -->
    <div class="hamburger-menu" id="hamburgerMenu">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">üéÆ CLAFT</div>
        </div>
        <div class="sidebar-nav">
            <ul>
                <li><a href="index.html" class="active"><i class="fas fa-home"></i><span class="nav-label">„Éõ„Éº„É†</span></a></li>
                <li><a href="quest.html"><i class="fas fa-map"></i><span class="nav-label">„ÇØ„Ç®„Çπ„Éà„Éû„ÉÉ„Éó</span></a></li>
                <li><a href="yononaka.html"><i class="fas fa-globe"></i><span class="nav-label">Yononaka</span></a></li>
                <li><a href="mirai.html"><i class="fas fa-rocket"></i><span class="nav-label">„Éü„É©„Ç§„ÇØ„É©„Éï„Éà</span></a></li>
            </ul>
        </div>
    </nav>

    <!-- „Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Ë™çË®º„Éú„Çø„É≥Áî®„Çπ„Éö„Éº„Çπ -->
    <div class="nav-buttons"></div>

    <!-- ËÉåÊôØ -->
    <div class="background-wrapper">
        <div class="parallax-layer sky-layer"></div>
        <div class="parallax-layer clouds">
            <div class="cloud cloud1"></div>
            <div class="cloud cloud2"></div>
            <div class="cloud cloud3"></div>
        </div>
        <div class="city-silhouette"></div>
    </div>

    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <header class="header">
        <div class="header-content">
            <div class="player-info">
                <div class="greeting-section">
                    <h1 id="greeting">„Åì„Çì„Å´„Å°„ÅØ„ÄÅ<span id="playerName">„Åü„Çç„ÅÜ</span>„Åï„ÇìÔºÅ</h1>
                    <p id="subGreeting">‰ªäÊó•„ÇÇÁ¥†Êô¥„Çâ„Åó„ÅÑÂÜíÈô∫„ÇíÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜ</p>
                </div>
            </div>
            <div class="auth-status">
                <!-- „É≠„Ç∞„Ç§„É≥Ââç -->
                <button data-auth-action="login" class="auth-btn login-btn" style="display: none;">
                    <i class="fas fa-sign-in-alt"></i> „É≠„Ç∞„Ç§„É≥/ÁôªÈå≤
                </button>
                
                <!-- „É≠„Ç∞„Ç§„É≥Âæå -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-details">
                        <span class="user-name" id="headerUserName">„É¶„Éº„Ç∂„ÉºÂêç</span>
                        <div class="user-stats">
                            <span class="stat-item">
                                <i class="fas fa-calendar-check"></i>
                                <span id="loginCount">0</span>Âõû„É≠„Ç∞„Ç§„É≥
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-trophy"></i>
                                <span id="questClearCount">0</span>„ÇØ„Ç®„Çπ„Éà„ÇØ„É™„Ç¢
                            </span>
                </div>
                </div>
                    <button data-auth-action="logout" class="auth-btn logout-btn">
                        <i class="fas fa-sign-out-alt"></i> „É≠„Ç∞„Ç¢„Ç¶„Éà
                    </button>
                </div>
            </div>
        </div>
        <div class="exp-bar-container">
            <div class="exp-bar" id="expBar" style="width: 65%;"></div> <!-- style„ÅßÂàùÊúüÂπÖÊåáÂÆö -->
        </div>
    </header>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <main class="main-content">
        <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Ç´„Éº„ÉâÔºàÁîªÈù¢„ÅÆ50%Ôºâ -->
        <div class="profile-card">
            <!-- Âü∫Êú¨ÊÉÖÂ†±„Ç®„É™„Ç¢ -->
            <div class="profile-header">
                <div class="profile-avatar">
                    <div class="avatar-container">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="status-indicator"></div>
                </div>
                <h2 class="profile-name" id="profileName">„Åü„Çç„ÅÜ</h2>
                <p class="profile-character" id="profileCharacter">
                    <span id="characterText">ÂÜíÈô∫Â§ßÂ•Ω„ÅçÔºÅÊåëÊà¶ËÄÖ„Çø„Ç§„Éó</span>
                </p>
                <div class="profile-catchphrase" id="profileCatchphrase">
                    <span class="profile-catchphrase-text" id="catchphraseText">„ÄåÊñ∞„Åó„ÅÑ„Åì„Å®„Å´„ÉÅ„É£„É¨„É≥„Ç∏„Å†ÔºÅ„Äç</span>
                </div>
            </div>

            <!-- Ë©≥Á¥∞ÊÉÖÂ†±„Ç®„É™„Ç¢ -->
            <div class="profile-details">
                <!-- ËÉΩÂäõ„ÉªÁâπÊÄß -->
                <div class="profile-abilities">
                    <div class="ability-card strength">
                        <div class="ability-header">
                            <div class="ability-icon">üí™</div>
                            <div class="ability-title">„Å®„Åè„ÅÑ</div>
                        </div>
                        <div class="ability-tags" id="strengthTags">
                            <span class="ability-tag">„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞</span>
                            <span class="ability-tag">„Éá„Ç∂„Ç§„É≥</span>
                            <span class="ability-tag">ÂïèÈ°åËß£Ê±∫</span>
                        </div>
                    </div>
                    <div class="ability-card weakness">
                        <div class="ability-header">
                            <div class="ability-icon">üòÖ</div>
                            <div class="ability-title">„Çà„Çè„Åø</div>
                        </div>
                        <div class="ability-tags" id="weaknessTags">
                            <span class="ability-tag">ÊôÇÈñìÁÆ°ÁêÜ</span>
                            <span class="ability-tag">ÊúùËµ∑„Åç</span>
                        </div>
                    </div>
                </div>

                <!-- „Éë„Éº„ÇΩ„Éä„É´ÊÉÖÂ†± -->
                <div class="profile-personal">
                    <div class="personal-item">
                        <div class="personal-label">
                            <span>üèñÔ∏è</span>
                            <span>„Åô„Åç„Å™ÊôÇÈñì„ÉªÂ†¥ÊâÄ</span>
                        </div>
                        <div class="personal-value" id="favoriteTime">
                            „Ç´„Éï„Çß„Åß„Ç≥„Éº„Éí„Éº„ÇíÈ£≤„Åø„Å™„Åå„Çâ„Ç≥„Éº„Éá„Ç£„É≥„Ç∞
                        </div>
                    </div>
                    <div class="personal-item">
                        <div class="personal-label">
                            <span>‚ö°</span>
                            <span>„Ç®„Éç„É´„ÇÆ„Éº„ÉÅ„É£„Éº„Ç∏ÊñπÊ≥ï</span>
                        </div>
                        <div class="personal-value" id="energyCharge">
                            Èü≥Ê•Ω„ÇíËÅ¥„Åç„Å™„Åå„ÇâÊï£Ê≠©„Åô„Çã
                        </div>
                    </div>
                </div>

                <!-- ‰∏ÄÁ∑í„Å´ÂÜíÈô∫„Åó„Åü„ÅÑ‰∫∫ -->
                <div class="adventure-partner">
                    <div class="adventure-partner-content">
                        <div class="adventure-partner-label">
                            <span>ü§ù</span>
                            <span>‰∏ÄÁ∑í„Å´ÂÜíÈô∫„Åó„Åü„ÅÑ‰∫∫</span>
                        </div>
                        <div class="adventure-partner-value" id="adventurePartner">
                            Êñ∞„Åó„ÅÑ„Ç¢„Ç§„Éá„Ç¢„Çí„Ç∑„Çß„Ç¢„Åß„Åç„Çã„ÇØ„É™„Ç®„Ç§„ÉÜ„Ç£„Éñ„Å™‰ª≤Èñì
                        </div>
                    </div>
                </div>

                <!-- „Å≤„Å®„Åì„Å® -->
                <div class="profile-comment">
                    <div class="comment-header">
                        <span>üìù</span>
                        <span>„Å≤„Å®„Åì„Å®</span>
                    </div>
                    <div class="comment-text" id="commentText">
                        ÊØéÊó•„ÅåÊñ∞„Åó„ÅÑÂÜíÈô∫ÔºÅ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„ÇíÈÄö„Åò„Å¶„ÄÅ‰∏ñÁïå„Çí„ÇÇ„Å£„Å®‰æøÂà©„ÅßÊ•Ω„Åó„ÅÑÂ†¥ÊâÄ„Å´„Åó„Åü„ÅÑ„Åß„Åô„ÄÇ‰∏ÄÁ∑í„Å´Á¥†Êô¥„Çâ„Åó„ÅÑ„ÇÇ„ÅÆ„Çí‰Ωú„Çä„Åæ„Åó„Çá„ÅÜÔºÅ
                    </div>
                </div>

                <!-- Á∑®ÈõÜ„Éú„Çø„É≥ -->
                <button class="edit-profile-btn" onclick="goToProfileEdit()">
                    <i class="fas fa-pencil-alt"></i> „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ
                </button>
            </div>
        </div>

        <!-- „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢ÔºàÁîªÈù¢„ÅÆ50%Ôºâ -->
        <div class="content-area">
            <!-- „ÇØ„É©„Éï„Éà„Çπ„Éà„Éº„É™„Éº„Ç´„Éº„Éâ -->
            <div class="craft-story-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-book-open"></i>
                        „ÇØ„É©„Éï„Éà„Çπ„Éà„Éº„É™„Éº
                    </h3>
                </div>
                
                <!-- ÁõÆÊ®ô„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="goals-section">
                    <div class="goal-card">
                        <div class="goal-content">
                            <div class="goal-icon">
                                <i class="fas fa-flag-checkered"></i> <!-- Áü≠ÊúüÁõÆÊ®ô„Ç¢„Ç§„Ç≥„É≥ -->
                            </div>
                            <div class="goal-label">Áü≠ÊúüÁõÆÊ®ô</div>
                            <div class="goal-text">Â§è‰ºë„Åø‰∏≠„Å´„ÄåÂ≠¶Ê†°„ÅÆ‰∏ç‰æø„ÇíËß£Ê±∫„Åô„Çã„Éü„Éã„Çµ„Éº„Éì„Çπ„Äç„Çí3„Å§ËÄÉ„Åà„Å¶„É°„É¢„Åô„Çã</div>
                            <div class="goal-progress">
                                <div class="goal-progress-bar" style="width: 75%;"></div> <!-- ÈÄ≤Êçó‰æã -->
                            </div>
                        </div>
                    </div>
                    <div class="goal-card">
                        <div class="goal-content">
                            <div class="goal-icon">
                                <i class="fas fa-mountain"></i> <!-- Èï∑ÊúüÁõÆÊ®ô„Ç¢„Ç§„Ç≥„É≥ -->
                            </div>
                            <div class="goal-label">Èï∑ÊúüÁõÆÊ®ô</div>
                            <div class="goal-text">„Ç¢„Ç§„Éá„Ç¢„Ç≥„É≥„ÉÜ„Çπ„Éà„ÅßÂÑ™Âãù„Åô„Çã</div>
                            <div class="goal-progress">
                                <div class="goal-progress-bar" style="width: 30%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="actions-section">
                    <a href="#created" class="action-link">
                        <div class="action-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <div class="action-content">
                            <div class="action-title">„Å§„Åè„Å£„Åü„ÇÇ„ÅÆ</div>
                            <div class="action-desc">‰ΩúÂìÅ„ÇÆ„É£„É©„É™„Éº„ÇíË¶ã„Çã</div>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>
                    <a href="#talked" class="action-link">
                        <div class="action-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="action-content">
                            <div class="action-title">„ÅØ„Å™„Åó„Åü„Åì„Å®</div>
                            <div class="action-desc">‰ºöË©±„ÅÆË®òÈå≤„ÇíË¶ã„Çã</div>
                        </div>
                        <div class="action-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>
                </div>
            </div> <!-- .craft-story-card ÁµÇ‰∫Ü -->

            <!-- „Ç∏„Éñ„É≥„ÇØ„É©„Éï„Éà„Ç´„Éº„Éâ (Êñ∞Ë¶èËøΩÂä†) -->
            <div class="jibun-craft-card" id="jibun-craft-card-anchor"> <!-- idËøΩÂä† -->
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-cogs"></i> <!-- „Ç∏„Éñ„É≥„ÇØ„É©„Éï„Éà „Ç¢„Ç§„Ç≥„É≥‰æã -->
                        „Ç∏„Éñ„É≥„ÇØ„É©„Éï„Éà
                    </h3>
                </div>

                <!-- 5„Å§„ÅÆÂäõ„É°„Éº„Çø„Éº -->
                <div class="powers-section">
                    <div class="power-meter">
                        <div class="power-header">
                            <span class="power-name">
                                <span class="power-icon tsunagu"><i class="fas fa-link"></i></span>
                                „Å§„Å™„ÅêÂäõ
                            </span>
                            <span class="power-level">Lv. 4</span>
                        </div>
                        <div class="power-bar-container">
                            <div class="power-bar tsunagu" style="width: 40%;"></div>
                        </div>
                    </div>
                    <div class="power-meter">
                        <div class="power-header">
                            <span class="power-name">
                                <span class="power-icon hiraku"><i class="fas fa-lightbulb"></i></span>
                                „Å≤„Çâ„ÅèÂäõ
                            </span>
                            <span class="power-level">Lv. 6</span>
                        </div>
                        <div class="power-bar-container">
                            <div class="power-bar hiraku" style="width: 60%;"></div>
                        </div>
                    </div>
                    <div class="power-meter">
                        <div class="power-header">
                            <span class="power-name">
                                <span class="power-icon egaku"><i class="fas fa-pencil-ruler"></i></span>
                                „Åà„Åå„ÅèÂäõ
                            </span>
                            <span class="power-level">Lv. 6</span>
                        </div>
                        <div class="power-bar-container">
                            <div class="power-bar egaku" style="width: 60%;"></div>
                        </div>
                    </div>
                    <div class="power-meter">
                        <div class="power-header">
                            <span class="power-name">
                                <span class="power-icon narikiru"><i class="fas fa-theater-masks"></i></span>
                                „Å™„Çä„Åç„ÇãÂäõ
                            </span>
                            <span class="power-level">Lv. 4</span>
                        </div>
                        <div class="power-bar-container">
                            <div class="power-bar narikiru" style="width: 40%;"></div>
                        </div>
                    </div>
                    <div class="power-meter">
                        <div class="power-header">
                            <span class="power-name">
                                <span class="power-icon makikomu"><i class="fas fa-users"></i></span>
                                „Åæ„Åç„Åì„ÇÄÂäõ
                            </span>
                            <span class="power-level">Lv. 4</span>
                        </div>
                        <div class="power-bar-container">
                            <div class="power-bar makikomu" style="width: 40%;"></div>
                        </div>
                    </div>
                </div>

                <!-- „Çπ„Ç≠„É´„Çø„Éñ -->
                <div class="skills-section">
                    <div class="skills-tabs">
                        <div class="skill-tab active"> <!-- ÂàùÊúü„Ç¢„ÇØ„ÉÜ„Ç£„Éñ‰æã -->
                            <div class="skill-tab-content">
                                <i class="fas fa-yen-sign"></i>
                                <div class="skill-tab-label">„ÅäÈáë</div>
                            </div>
                            <span class="skill-tab-level">Lv.5</span>
                        </div>
                        <div class="skill-tab">
                             <div class="skill-tab-content">
                                <i class="fas fa-laptop-code"></i>
                                <div class="skill-tab-label">ÊäÄË°ì</div>
                            </div>
                            <span class="skill-tab-level">Lv.3</span>
                        </div>
                        <div class="skill-tab">
                            <div class="skill-tab-content">
                                <i class="fas fa-comments"></i>
                                <div class="skill-tab-label">ÂØæË©±Âäõ</div>
                            </div>
                             <span class="skill-tab-level">Lv.4</span>
                        </div>
                        <div class="skill-tab locked">
                            <div class="skill-tab-content">
                                <i class="fas fa-lock"></i>
                                <div class="skill-tab-label">ÔºüÔºüÔºü</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- .jibun-craft-card ÁµÇ‰∫Ü -->
        </div> <!-- .content-area ÁµÇ‰∫Ü -->
    </main> <!-- .main-content ÁµÇ‰∫Ü -->

    <!-- „É¨„Éô„É´„Ç¢„ÉÉ„Éó„É¢„Éº„ÉÄ„É´ -->
    <div class="levelup-modal" id="levelUpModal">
        <div class="levelup-content">
            <div class="levelup-icon">üéâ</div>
            <h3 class="levelup-title">„É¨„Éô„É´„Ç¢„ÉÉ„ÉóÔºÅ</h3>
            <p class="levelup-message">Êñ∞„Åó„ÅÑ„Çπ„Ç≠„É´„Å®Â†±ÈÖ¨„ÇíÁç≤Âæó„Åó„Åæ„Åó„ÅüÔºÅ</p>
            <div class="levelup-rewards">
                <div class="reward-item">
                    <span class="reward-icon"><i class="fas fa-star"></i></span>
                    <span class="reward-text">+100 EXP</span>
                </div>
                <div class="reward-item">
                    <span class="reward-icon"><i class="fas fa-gem"></i></span>
                    <span class="reward-text">Êñ∞„Åó„ÅÑ„Éê„ÉÉ„Ç∏</span>
                </div>
            </div>
            <button class="levelup-close" onclick="closeLevelUpModal()">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <!-- ÈÄöÁü•„Ç≥„É≥„ÉÜ„Éä -->
    <div class="notification-container" id="notificationContainer">
        <!-- ÈÄöÁü•„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
    </div>

<!-- include.js „ÅØ„Åô„ÅêË™≠„ÅøËæº„ÇÄ -->
<script src="js/include.js"></script>

<!-- Supabase„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„Åã„Çâauth.js„ÇíË™≠„ÅøËæº„ÇÄ -->
<script>
function loadAuthWhenReady() {
    if (window.supabase && window.supabase.createClient) {
        const script = document.createElement('script');
        script.src = 'js/auth.js';
        document.body.appendChild(script);
    } else {
        setTimeout(loadAuthWhenReady, 100);
    }
}
loadAuthWhenReady();
</script>

<!-- „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂàùÊúüÂåñ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (window.authManager && authManager.getCurrentUser()) {
        document.getElementById('welcomeMessage').textContent = `„Çà„ÅÜ„Åì„Åù„ÄÅ${authManager.getCurrentUser().email}„Åï„ÇìÔºÅ`;
    } else {
        document.getElementById('welcomeMessage').textContent = '„Çà„ÅÜ„Åì„Åù„ÄÅÂÜíÈô∫ËÄÖ„Åï„ÇìÔºÅ';
    }
});
</script>

</body>
</html>